{"ast":null,"code":"// src/hooks/useGame.js - Handle card matching logic\nimport{useContext,useEffect}from'react';import{GameContext}from'../context/GameContext';export const useGame=()=>{const{state,dispatch}=useContext(GameContext);// Add initialization of scores from localStorage\nuseEffect(()=>{const savedScores=localStorage.getItem('memory-game-scores');if(savedScores){dispatch({type:'LOAD_SCORES',payload:JSON.parse(savedScores)});}},[dispatch]);// Added dispatch to dependency array\n// Handle card matching logic\nuseEffect(()=>{if(state.selectedCards.length===2){const timeoutId=setTimeout(()=>{dispatch({type:'CHECK_MATCH'});},1000);return()=>clearTimeout(timeoutId);}},[state.selectedCards,dispatch]);// Handle game end\nuseEffect(()=>{const allMatched=state.cards.every(card=>card.matched);if(allMatched&&state.cards.length>0){dispatch({type:'END_GAME'});}},[state.cards,dispatch]);const handleCardClick=card=>{if(card.matched||state.selectedCards.length>=2)return;dispatch({type:'SELECT_CARD',payload:card});};return{state,dispatch,handleCardClick};};","map":{"version":3,"names":["useContext","useEffect","GameContext","useGame","state","dispatch","savedScores","localStorage","getItem","type","payload","JSON","parse","selectedCards","length","timeoutId","setTimeout","clearTimeout","allMatched","cards","every","card","matched","handleCardClick"],"sources":["C:/Users/David Maguire/gaming/src/hooks/useGame.js"],"sourcesContent":["// src/hooks/useGame.js - Handle card matching logic\r\nimport { useContext, useEffect } from 'react';\r\nimport { GameContext } from '../context/GameContext';\r\n\r\nexport const useGame = () => {\r\n  const { state, dispatch } = useContext(GameContext);\r\n\r\n  // Add initialization of scores from localStorage\r\n  useEffect(() => {\r\n    const savedScores = localStorage.getItem('memory-game-scores');\r\n    if (savedScores) {\r\n      dispatch({ \r\n        type: 'LOAD_SCORES', \r\n        payload: JSON.parse(savedScores)\r\n      });\r\n    }\r\n  }, [dispatch]); // Added dispatch to dependency array\r\n\r\n  // Handle card matching logic\r\n  useEffect(() => {\r\n    if (state.selectedCards.length === 2) {\r\n      const timeoutId = setTimeout(() => {\r\n        dispatch({ type: 'CHECK_MATCH' });\r\n      }, 1000);\r\n      \r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [state.selectedCards, dispatch]);\r\n\r\n  // Handle game end\r\n  useEffect(() => {\r\n    const allMatched = state.cards.every(card => card.matched);\r\n    if (allMatched && state.cards.length > 0) {\r\n      dispatch({ type: 'END_GAME' });\r\n    }\r\n  }, [state.cards, dispatch]);\r\n\r\n  const handleCardClick = (card) => {\r\n    if (card.matched || state.selectedCards.length >= 2) return;\r\n    dispatch({ type: 'SELECT_CARD', payload: card });\r\n  };\r\n\r\n  return { state, dispatch, handleCardClick };\r\n};"],"mappings":"AAAA;AACA,OAASA,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7C,OAASC,WAAW,KAAQ,wBAAwB,CAEpD,MAAO,MAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAGL,UAAU,CAACE,WAAW,CAAC,CAEnD;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAK,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAC9D,GAAIF,WAAW,CAAE,CACfD,QAAQ,CAAC,CACPI,IAAI,CAAE,aAAa,CACnBC,OAAO,CAAEC,IAAI,CAACC,KAAK,CAACN,WAAW,CACjC,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAAE;AAEhB;AACAJ,SAAS,CAAC,IAAM,CACd,GAAIG,KAAK,CAACS,aAAa,CAACC,MAAM,GAAK,CAAC,CAAE,CACpC,KAAM,CAAAC,SAAS,CAAGC,UAAU,CAAC,IAAM,CACjCX,QAAQ,CAAC,CAAEI,IAAI,CAAE,aAAc,CAAC,CAAC,CACnC,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMQ,YAAY,CAACF,SAAS,CAAC,CACtC,CACF,CAAC,CAAE,CAACX,KAAK,CAACS,aAAa,CAAER,QAAQ,CAAC,CAAC,CAEnC;AACAJ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,UAAU,CAAGd,KAAK,CAACe,KAAK,CAACC,KAAK,CAACC,IAAI,EAAIA,IAAI,CAACC,OAAO,CAAC,CAC1D,GAAIJ,UAAU,EAAId,KAAK,CAACe,KAAK,CAACL,MAAM,CAAG,CAAC,CAAE,CACxCT,QAAQ,CAAC,CAAEI,IAAI,CAAE,UAAW,CAAC,CAAC,CAChC,CACF,CAAC,CAAE,CAACL,KAAK,CAACe,KAAK,CAAEd,QAAQ,CAAC,CAAC,CAE3B,KAAM,CAAAkB,eAAe,CAAIF,IAAI,EAAK,CAChC,GAAIA,IAAI,CAACC,OAAO,EAAIlB,KAAK,CAACS,aAAa,CAACC,MAAM,EAAI,CAAC,CAAE,OACrDT,QAAQ,CAAC,CAAEI,IAAI,CAAE,aAAa,CAAEC,OAAO,CAAEW,IAAK,CAAC,CAAC,CAClD,CAAC,CAED,MAAO,CAAEjB,KAAK,CAAEC,QAAQ,CAAEkB,eAAgB,CAAC,CAC7C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}